CREATE TABLE TB_PUBLISHER (
    PUB_NO  NUMBER CONSTRAINT PUBLISHER_PK PRIMARY KEY,
    PUB_NAME VARCHAR2(50) CONSTRAINT PUBLISHER_NN NOT NULL,
    PHONE VARCHAR2(15)
);

COMMENT ON COLUMN TB_PUBLISHER.PUB_NO IS '출판사번호';
COMMENT ON COLUMN TB_PUBLISHER.PUB_NAME IS '출판사명';
COMMENT ON COLUMN TB_PUBLISHER.PHONE IS '출판사전화번호';

INSERT INTO TB_PUBLISHER VALUES('1', '민음사', '02-1533-0129');
INSERT INTO TB_PUBLISHER VALUES('2', '사계절', '02-3452-2334');
INSERT INTO TB_PUBLISHER VALUES('3', '바다', '02-7854-1333');
INSERT INTO TB_PUBLISHER VALUES('4', '창비', '02-2324-2345');


CREATE TABLE TB_BOOK (
    BK_NO NUMBER CONSTRAINT BOOK_PK PRIMARY KEY,
    BK_TITLE VARCHAR2(100) constraint BOOK_NN_TITLE NOT NULL,
    BK_AUTHOR VARCHAR2(50),
    BK_PRICE NUMBER,
    BK_PUB_NO NUMBER CONSTRAINT BOOK_FK  REFERENCES TB_PUBLISHER(PUB_NO) ON DELETE CASCADE,
    CONSTRAINT BOOK_NN_AUTHOR NOT NULL (BK_AUTHOR)
);

COMMENT ON COLUMN BK_NO IS('도서번호');
COMMENT ON COLUMN BK_TITLE IS('도서명');
COMMENT ON COLUMN BK_AUTHOR IS('저자명');
COMMENT ON COLUMN BK_PRICE IS('가격');
COMMENT ON COLUMN BK_PUB_NO IS('출판사번호');

INSERT INTO TB_BOOK VALUES('1', '뉴필로소피', '바다', '8000', '3');
INSERT INTO TB_BOOK VALUES('2', '데미안', '헤르만헤세', '13000', '1');
INSERT INTO TB_BOOK VALUES('3', '참존가', '밀란쿤데라', '12000', '1');
INSERT INTO TB_BOOK VALUES('4', '어세계', '김소영', '13500', '2');
INSERT INTO TB_BOOK VALUES('5', '강아지걸음', '황선미', '9900', '4');

CREATE TABLE TB_MEMBER (
    MEMBER_NO NUMBER CONSTRAINT MEMBER_PK PRIMARY KEY,
    MEMBER_ID VARCHAR2(20) CONSTRAINT MEMBER_UQ UNIQUE,
    MEMBER_PWD VARCHAR2(30) CONSTRAINT MEMBER_NN_PWD NOT NULL,
    GENDER CHAR(1) CONSTRAINT MEMBER_CK_GEN CHECK(GENDER IN ('M', 'F')),
    ADDRESS VARCHAR2(200),
    PHONE VARCHAR2(15),
    STATUS char(1) DEFAULT 'N' CONSTRAINT MEMBER_CK_ST CHECK (STATUS IN ('N', 'Y')),
    ENROLL_DATE DATE DEFAULT SYSDATE CONSTRAINT MEMBER_NN_EN NOT NULL,
);

COMMENT ON MEMBER_NO IS('회원번호');
COMMENT ON MEMBER_ID IS('아이디');
COMMENT ON MEMBER_PWD IS('비밀번호');
COMMENT ON MEMBER_NAME IS('회원명');
COMMENT ON GENDER IS('성별');
COMMENT ON ADDRESS IS('주소');
COMMENT ON PHONE IS('연락처');
COMMENT ON STATUS IS('탈퇴여부');
COMMENT ON ENROLL_DATE IS('가입일');

INSERT INTO TB_MEMBER 
VALUES('1', 'aaa', 'aaa', '에이', 'F', 
        '일산', '010-1111-1111', 'N', SYSDATE);

INSERT INTO TB_MEMBER 
VALUES('2', 'bbb', 'bbb', '비', 'M', 
        '강남', '010-2222-1111', 'N', SYSDATE);

INSERT INTO TB_MEMBER 
VALUES('3', 'ccc', 'ccc', '씨', 'F', 
        '당산', '010-3333-1111', 'N', SYSDATE);

INSERT INTO TB_MEMBER 
VALUES('4', 'ddd', 'ddd', '디', 'M', 
        '종로', '010-4444-1111', 'N', SYSDATE);

INSERT INTO TB_MEMBER 
VALUES('5', 'eee', 'eee', '이', 'M', 
        '수원', '010-5555-1111', 'N', SYSDATE);

CREATE TABLE TB_RENT (
    RENT_NO NUMBER CONSTRAINT RENT_PK CONSTRAINT RENT_PK PRIMARY KEY,
    RENT_MEM_NO NUMBER CONSTRAINT RENT_MEM_NO REFERENCES TB_MEMBER(MEMBER_NO) ON DELETE SET NULL,
    RENT_BOOK_NO NUMBER CONSTRAINT RENT_FK_BOOK REFERENCES TB_BOOK(BK_NO) ON DELETE SET NULL,
    RENT_DATE DATE DEFAULT SYSDATE
);

INSERT INTO TB_RENT VALUES('1', '1', '1', '2023-01-02');
INSERT INTO TB_RENT VALUES('2', '1', '4', '2023-01-02');
INSERT INTO TB_RENT VALUES('3', '2', '1', '2023-02-02');
INSERT INTO TB_RENT VALUES('4', '3', '2', '2023-02-14');
INSERT INTO TB_RENT VALUES('5', '5', '3', '2023-02-19');
